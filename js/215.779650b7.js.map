{"version":3,"file":"js/215.779650b7.js","mappings":"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","sources":["webpack://sanyue_imghub/./src/views/Login.vue?50fe","webpack://sanyue_imghub/./src/views/Login.vue","webpack://sanyue_imghub/./src/views/Login.vue?2b97"],"sourcesContent":["import { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"login\"\n};\nconst _hoisted_2 = {\n  class: \"login-container\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_button = _resolveComponent(\"el-button\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[2] || (_cache[2] = _createElementVNode(\"img\", {\n    id: \"bg1\",\n    class: \"background-image1\",\n    alt: \"Background Image\"\n  }, null, -1)), _cache[3] || (_cache[3] = _createElementVNode(\"img\", {\n    id: \"bg2\",\n    class: \"background-image2\",\n    alt: \"Background Image\"\n  }, null, -1)), _createElementVNode(\"div\", _hoisted_2, [_cache[1] || (_cache[1] = _createElementVNode(\"h1\", null, \"Login\", -1)), _createVNode(_component_el_button, {\n    class: \"submit\",\n    type: \"primary\",\n    onClick: $options.login\n  }, {\n    default: _withCtx(() => _cache[0] || (_cache[0] = [_createTextVNode(\"登录\")])),\n    _: 1\n  }, 8, [\"onClick\"])])]);\n}","import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/web.url-search-params.delete.js\";\nimport \"core-js/modules/web.url-search-params.has.js\";\nimport \"core-js/modules/web.url-search-params.size.js\";\nimport cookies from 'vue-cookies';\nimport axios from 'axios';\nimport { mapGetters } from 'vuex';\nexport default {\n  data() {\n    return {\n      password: '',\n      writtenPass: '',\n      bingWallPaperIndex: 0,\n      customWallPaperIndex: 0\n    };\n  },\n  computed: {\n    ...mapGetters(['userConfig', 'bingWallPapers']),\n    bkInterval() {\n      return this.userConfig?.bkInterval || 3000;\n    },\n    bkOpacity() {\n      return this.userConfig?.bkOpacity || 1;\n    }\n  },\n  mounted() {\n    // 从 URL 中解析 password 参数\n    const urlParams = new URLSearchParams(window.location.search);\n    const urlPassword = urlParams.get('password');\n    if (urlPassword) {\n      this.password = urlPassword;\n    }\n\n    // 背景图逻辑\n    const bg1 = document.getElementById('bg1');\n    const bg2 = document.getElementById('bg2');\n    if (this.userConfig?.loginBkImg === 'bing') {\n      // Bing 壁纸轮播\n      this.$store.dispatch('fetchBingWallPapers').then(() => {\n        bg1.src = this.bingWallPapers[this.bingWallPaperIndex]?.url;\n        bg1.onload = () => {\n          bg1.style.opacity = this.bkOpacity;\n        };\n        setInterval(() => {\n          let curBg = bg1.style.opacity != 0 ? bg1 : bg2;\n          let nextBg = bg1.style.opacity != 0 ? bg2 : bg1;\n          curBg.style.opacity = 0;\n          this.bingWallPaperIndex = (this.bingWallPaperIndex + 1) % this.bingWallPapers.length;\n          nextBg.src = this.bingWallPapers[this.bingWallPaperIndex]?.url;\n          nextBg.onload = () => {\n            nextBg.style.opacity = this.bkOpacity;\n          };\n        }, this.bkInterval);\n      });\n    } else if (this.userConfig?.loginBkImg instanceof Array && this.userConfig?.loginBkImg.length > 1) {\n      // 自定义壁纸组轮播\n      bg1.src = this.userConfig.loginBkImg[this.customWallPaperIndex];\n      bg1.onload = () => {\n        bg1.style.opacity = this.bkOpacity;\n      };\n      setInterval(() => {\n        let curBg = bg1.style.opacity != 0 ? bg1 : bg2;\n        let nextBg = bg1.style.opacity != 0 ? bg2 : bg1;\n        curBg.style.opacity = 0;\n        this.customWallPaperIndex = (this.customWallPaperIndex + 1) % this.userConfig.loginBkImg.length;\n        nextBg.src = this.userConfig.loginBkImg[this.customWallPaperIndex];\n        nextBg.onload = () => {\n          nextBg.style.opacity = this.bkOpacity;\n        };\n      }, this.bkInterval);\n    } else if (this.userConfig?.loginBkImg instanceof Array && this.userConfig?.loginBkImg.length === 1) {\n      // 单张自定义壁纸\n      bg1.src = this.userConfig.loginBkImg[0];\n      bg1.onload = () => {\n        bg1.style.opacity = this.bkOpacity;\n      };\n    } else {\n      // 默认壁纸\n      bg1.src = require('@/assets/background.jpg');\n      bg1.onload = () => {\n        bg1.style.opacity = this.bkOpacity;\n      };\n    }\n  },\n  methods: {\n    login() {\n      // 设置 authCode 到 Cookie，过期时间为 2 周\n      if (this.password === '') {\n        this.writtenPass = 'unset';\n      } else {\n        this.writtenPass = this.password;\n      }\n      axios.post('/login', {\n        authCode: this.password\n      }).then(res => {\n        if (res.status !== 200) {\n          this.$message.error('登录失败，请检查认证码是否正确~');\n          return;\n        }\n        cookies.set('authCode', this.writtenPass, '14d');\n        this.$router.push('/');\n        this.$message.success('登录成功~');\n      }).catch(err => {\n        this.$message.error('登录失败，请检查认证码是否正确~');\n      });\n    }\n  }\n};","/* unplugin-vue-components disabled */import { render } from \"./Login.vue?vue&type=template&id=6185d1c0&scoped=true\"\nimport script from \"./Login.vue?vue&type=script&lang=js\"\nexport * from \"./Login.vue?vue&type=script&lang=js\"\n\nimport \"./Login.vue?vue&type=style&index=0&id=6185d1c0&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6185d1c0\"]])\n\nexport default __exports__"],"names":["_hoisted_1","class","_hoisted_2","render","_ctx","_cache","$props","$setup","$data","$options","_component_el_button","id","alt","type","onClick","login","default","_","data","password","writtenPass","bingWallPaperIndex","customWallPaperIndex","computed","bkInterval","this","userConfig","bkOpacity","mounted","urlParams","URLSearchParams","window","location","search","urlPassword","get","bg1","document","getElementById","bg2","loginBkImg","$store","dispatch","then","src","bingWallPapers","url","onload","style","opacity","setInterval","curBg","nextBg","length","Array","methods","axios","post","authCode","res","status","$router","push","$message","success","error","catch","err","__exports__"],"sourceRoot":""}