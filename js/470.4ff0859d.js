"use strict";(self["webpackChunksanyue_imghub"]=self["webpackChunksanyue_imghub"]||[]).push([[470],{5470:function(s,t,e){e.r(t),e.d(t,{default:function(){return y}});var i=e(47),a=(e(5331),e(9648),e(6768));const n={class:"login"},o={class:"login-container"};function l(s,t,e,l,r,g){const c=i.S2;return(0,a.uX)(),(0,a.CE)("div",n,[t[2]||(t[2]=(0,a.Lk)("img",{id:"bg1",class:"background-image1",alt:"Background Image"},null,-1)),t[3]||(t[3]=(0,a.Lk)("img",{id:"bg2",class:"background-image2",alt:"Background Image"},null,-1)),(0,a.Lk)("div",o,[t[1]||(t[1]=(0,a.Lk)("h1",null,"Login",-1)),(0,a.bF)(c,{class:"submit",type:"primary",onClick:g.login},{default:(0,a.k6)((()=>t[0]||(t[0]=[(0,a.eW)("登录")]))),_:1},8,["onClick"])])])}e(4114),e(4603),e(7566),e(8721);var r=e(4570),g=e.n(r),c=e(4373),h=e(782),u={data(){return{password:"",writtenPass:"",bingWallPaperIndex:0,customWallPaperIndex:0}},computed:{...(0,h.L8)(["userConfig","bingWallPapers"]),bkInterval(){return this.userConfig?.bkInterval||3e3},bkOpacity(){return this.userConfig?.bkOpacity||1}},mounted(){const s=new URLSearchParams(window.location.search),t=s.get("password");console.log("Parsed password from URL:",t),t&&(this.password=t);const i=document.getElementById("bg1"),a=document.getElementById("bg2");"bing"===this.userConfig?.loginBkImg?this.$store.dispatch("fetchBingWallPapers").then((()=>{i.src=this.bingWallPapers[this.bingWallPaperIndex]?.url,i.onload=()=>{i.style.opacity=this.bkOpacity},setInterval((()=>{let s=0!=i.style.opacity?i:a,t=0!=i.style.opacity?a:i;s.style.opacity=0,this.bingWallPaperIndex=(this.bingWallPaperIndex+1)%this.bingWallPapers.length,t.src=this.bingWallPapers[this.bingWallPaperIndex]?.url,t.onload=()=>{t.style.opacity=this.bkOpacity}}),this.bkInterval)})):this.userConfig?.loginBkImg instanceof Array&&this.userConfig?.loginBkImg.length>1?(i.src=this.userConfig.loginBkImg[this.customWallPaperIndex],i.onload=()=>{i.style.opacity=this.bkOpacity},setInterval((()=>{let s=0!=i.style.opacity?i:a,t=0!=i.style.opacity?a:i;s.style.opacity=0,this.customWallPaperIndex=(this.customWallPaperIndex+1)%this.userConfig.loginBkImg.length,t.src=this.userConfig.loginBkImg[this.customWallPaperIndex],t.onload=()=>{t.style.opacity=this.bkOpacity}}),this.bkInterval)):this.userConfig?.loginBkImg instanceof Array&&1===this.userConfig?.loginBkImg.length?(i.src=this.userConfig.loginBkImg[0],i.onload=()=>{i.style.opacity=this.bkOpacity}):(i.src=e(732),i.onload=()=>{i.style.opacity=this.bkOpacity})},methods:{login(){""===this.password?this.writtenPass="unset":this.writtenPass=this.password,c.A.post("/login",{authCode:this.password}).then((s=>{200===s.status?(g().set("authCode",this.writtenPass,"14d"),this.$router.push("/"),this.$message.success("登录成功~")):this.$message.error("登录失败，请检查认证码是否正确~")})).catch((s=>{this.$message.error("登录失败，请检查认证码是否正确~")}))}}},p=e(1241);const d=(0,p.A)(u,[["render",l],["__scopeId","data-v-5e116473"]]);var y=d},732:function(s,t,e){s.exports=e.p+"img/background.ea1b7ee7.jpg"}}]);
//# sourceMappingURL=470.4ff0859d.js.map